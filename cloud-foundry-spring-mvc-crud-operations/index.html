<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.833b626e997bad52d213.css">@import url(https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;1,300&display=swap);code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language-]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;transform:rotate(-2deg)}pre[class*=language-]:after{right:.75em;left:auto;transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*{box-sizing:border-box}html{-ms-text-size-adjust:100%}body{background-color:#f1f5f8;font-family:Ubuntu,sans-serif;font-weight:300;font-size:18px;color:#141414}a{color:#314a5e}a:hover{color:#547ea0}strong{font-weight:450}header{background-color:#411811;color:#e4ebf1}header a{color:#fff;text-decoration:none}header h1{margin:0;color:#fff;padding:.5rem 0 0;font-size:1.8rem}nav{background-color:#fab84c}nav div section{font-weight:700;margin:1em 0}footer{background-color:#411811;color:#e4ebf1;font-size:1.2em}footer a{color:#7ccb7d}footer a:hover{color:#b6e2b7}footer h2{color:#fab84c;font-style:italic;margin:1rem 0 .3rem}footer div,header div,main,nav div{max-width:1024px;margin:0 2vw}main{margin-bottom:1em;min-height:66vh}table{background:#f1f5f8;border-collapse:collapse}table td,table th{padding:.5em;border:1px dotted}table thead{background:#411811;color:#e4ebf1}table thead tr th:empty{display:none}table thead th{font-weight:400}table tr:nth-child(2n){background:#e4ebf1}table tfoot{font-weight:700}@media only screen and (min-width:720px){header h1{margin:0;padding:.5rem 0 0;font-size:2.85rem}}@media only screen and (min-width:1280px){footer div,header div,main,nav div{max-width:1024px;margin:auto}main{margin-bottom:1em}}.clearfix:after{content:"";display:table;clear:both}.row{clear:both}.column{float:left;padding:1rem}.small-6{width:50%}.small-12{width:100%}@media only screen and (min-width:768px){.medium-6{width:50%}}@media only screen and (min-width:1024px){.large-3{width:33.33333%}.large-6{width:50%}}</style><meta name="generator" content="Gatsby 2.24.85"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-961598-2"></script><script>
      
      
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-961598-2', {"send_page_view":false});
      }
      </script><title data-react-helmet="true">Spring MVC CRUD Operations | James&#x27;s Learn Book</title><meta data-react-helmet="true" name="description" content="This website captures knowledge so I can refer to it later."/><meta data-react-helmet="true" property="og:title" content="Spring MVC CRUD Operations"/><meta data-react-helmet="true" property="og:description" content="This website captures knowledge so I can refer to it later."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@jamestharpe"/><meta data-react-helmet="true" name="twitter:title" content="Spring MVC CRUD Operations"/><meta data-react-helmet="true" name="twitter:description" content="This website captures knowledge so I can refer to it later."/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link as="script" rel="preload" href="/framework-e2d419ac45d8ae41957a.js"/><link as="script" rel="preload" href="/component---src-templates-article-tsx-c9595e21c952b003478d.js"/><link as="script" rel="preload" href="/commons-2bfb5058ac0ba02cc596.js"/><link as="script" rel="preload" href="/app-5b086e134c9e98d58ab7.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/webpack-runtime-2f099a332ccca9ed90fd.js"/><link as="fetch" rel="preload" href="/page-data\cloud-foundry-spring-mvc-crud-operations\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/80858887.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header><div class="row"><h1><a href="/">James&#x27;s Learn Book</a></h1></div></header><nav class="clearfix"><div class="row"><section class="column small-6 medium-6 large-6"><form><label for="search">Search: </label><input type="text" id="search" placeholder="Topic, keyword, etc..." autoComplete="off" value=""/><ul></ul></form></section><section class="column small-6 medium-6 large-6"><a class="active" href="/browse">Browse</a></section></div></nav><main><div><h1>Recipe: Create, Retrieve, Update, and Delete with Spring MVC</h1>
<p>This recipe is based on the <a href="https://github.com/jamestharpe/pal-tracker">PAL Tracker</a> example project.</p>
<h2>1. Create the Model</h2>
<p>We'll stick with the <a href="https://github.com/jamestharpe/pal-tracker">PAL Tracker</a> example and create a simple <code class="language-text">TimeEntry</code> class to be serialized for CRUD operations:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">io<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>tracker</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeEntry</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">long</span> id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">long</span> projectId<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">long</span> userId<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> hours<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">LocalDate</span> date<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span><span class="token keyword">long</span> projectId<span class="token punctuation">,</span> <span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> date<span class="token punctuation">,</span> <span class="token keyword">int</span> hours<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>projectId <span class="token operator">=</span> projectId<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userId <span class="token operator">=</span> userId<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>hours <span class="token operator">=</span> hours<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span><span class="token keyword">long</span> id<span class="token punctuation">,</span> <span class="token keyword">long</span> projectId<span class="token punctuation">,</span> <span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> date<span class="token punctuation">,</span> <span class="token keyword">int</span> hours<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>projectId <span class="token operator">=</span> projectId<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userId <span class="token operator">=</span> userId<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>hours <span class="token operator">=</span> hours<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getProjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> projectId<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> userId<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">LocalDate</span> <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> date<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> hours<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Required for equality comparisons</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> o<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token class-name">TimeEntry</span> timeEntry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TimeEntry</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!=</span> timeEntry<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>projectId <span class="token operator">!=</span> timeEntry<span class="token punctuation">.</span>projectId<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">!=</span> timeEntry<span class="token punctuation">.</span>userId<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">!=</span> timeEntry<span class="token punctuation">.</span>hours<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> date <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> date<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>timeEntry<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token operator">:</span> timeEntry<span class="token punctuation">.</span>date <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Required for equality comparisons</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>id <span class="token operator">^</span> <span class="token punctuation">(</span>id <span class="token operator">>>></span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		result <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> result <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>projectId <span class="token operator">^</span> <span class="token punctuation">(</span>projectId <span class="token operator">>>></span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		result <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> result <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>userId <span class="token operator">^</span> <span class="token punctuation">(</span>userId <span class="token operator">>>></span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		result <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> result <span class="token operator">+</span> <span class="token punctuation">(</span>date <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> date<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		result <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> result <span class="token operator">+</span> hours<span class="token punctuation">;</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">"TimeEntry{"</span> <span class="token operator">+</span>
			<span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
			<span class="token string">", projectId="</span> <span class="token operator">+</span> projectId <span class="token operator">+</span>
			<span class="token string">", userId="</span> <span class="token operator">+</span> userId <span class="token operator">+</span>
			<span class="token string">", date='"</span> <span class="token operator">+</span> date <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
			<span class="token string">", hours="</span> <span class="token operator">+</span> hours <span class="token operator">+</span>
			<span class="token string">'}'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>2. Create an in-memory Repository</h2>
<p>I'll cover using JDBC in my next article. For now, create an in-memory repository for time entries by implementing a <code class="language-text">TimeEntryRepository</code> interface. Using an interface will make it easy to swap out later.</p>
<p>First, create the <code class="language-text">TimeEntryRepository</code> interface:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">io<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>tracker</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TimeEntryRepository</span> <span class="token punctuation">{</span>
	<span class="token class-name">TimeEntry</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">TimeEntry</span> timeEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">TimeEntry</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">TimeEntry</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">TimeEntry</span> timeEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, implement it by storing <code class="language-text">TimeEntry</code> objects in a <code class="language-text">HashMap</code>:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">io<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>tracker</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InMemoryTimeEntryRepository</span> <span class="token keyword">implements</span> <span class="token class-name">TimeEntryRepository</span> <span class="token punctuation">{</span>
	<span class="token comment">// Store entries in a HashMap for onw</span>
	<span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> timeEntries <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token keyword">long</span> currentId <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">TimeEntry</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">TimeEntry</span> timeEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> currentId<span class="token operator">++</span><span class="token punctuation">;</span>

		<span class="token class-name">TimeEntry</span> newTimeEntry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span>
			id<span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getProjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>

		timeEntries<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> newTimeEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> newTimeEntry<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">TimeEntry</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> timeEntries<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>timeEntries<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">TimeEntry</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">TimeEntry</span> timeEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">TimeEntry</span> updatedEntry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span>
			id<span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getProjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			timeEntry<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>

		timeEntries<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> updatedEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> updatedEntry<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		timeEntries<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Wire up the <code class="language-text">TimeEntryRepository</code> Bean</h2>
<p>The <code class="language-text">@Bean</code> annotation allows an application to provide an implementation of a class or interface at run-time. To supply a <code class="language-text">TimeEntryRepository</code>, update the <code class="language-text">PalTrackerApplication</code> class:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">	<span class="token annotation punctuation">@Bean</span>
	<span class="token class-name">TimeEntryRepository</span> <span class="token function">timeEntryRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">InMemoryTimeEntryRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span></code></pre></div>
<p>Since the <code class="language-text">TimeEntry</code> class contains a <code class="language-text">LocalDate</code>, we also need to supply an <code class="language-text">ObjectMapper</code> which can properly serialize dates into <code class="language-text">LocalDate</code> objects, so add another <code class="language-text">@Bean</code> to supply a <code class="language-text">Jackson2ObjectMapperBuilder</code> instance:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">ObjectMapper</span> <span class="token function">jsonObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">Jackson2ObjectMapperBuilder</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">serializationInclusion</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude</span><span class="token punctuation">.</span><span class="token class-name">Include</span><span class="token punctuation">.</span>NON_NULL<span class="token punctuation">)</span> <span class="token comment">// Don’t include null values</span>
			<span class="token punctuation">.</span><span class="token function">featuresToDisable</span><span class="token punctuation">(</span><span class="token class-name">SerializationFeature</span><span class="token punctuation">.</span>WRITE_DATES_AS_TIMESTAMPS<span class="token punctuation">)</span> <span class="token comment">//ISODate</span>
			<span class="token punctuation">.</span><span class="token function">modules</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JavaTimeModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span></code></pre></div>
<p>For this to build, the Jackson dependency must be added to the <code class="language-text">dependencies</code> closure in <strong>build.gradle</strong>:</p>
<div class="gatsby-highlight" data-language="groovy"><pre class="language-groovy"><code class="language-groovy"><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string gstring">"com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.7"</span><span class="token punctuation">)</span></code></pre></div>
<h2>3. Create a Controller for CRUD Operations</h2>
<p>The controller is a simple Java class with the appropriate annotations: <code class="language-text">@PostMapping</code> for POST requests that will handle Create operation, <code class="language-text">@GetMapping</code> for GET requests to handle Retrieve operations, <code class="language-text">@PutMapping</code> for PUT requests that will handle Update operations, and <code class="language-text">@DeleteMapping</code> for DELETE requests to handle Delete operations.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">io<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>tracker</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token comment">// Sets the "root" for all TimeEntryController end-points</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/time-entries"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeEntryController</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token class-name">TimeEntryRepository</span> timeEntriesRepo<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">TimeEntryController</span><span class="token punctuation">(</span><span class="token class-name">TimeEntryRepository</span> timeEntriesRepo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>timeEntriesRepo <span class="token operator">=</span> timeEntriesRepo<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Create</span>
	<span class="token annotation punctuation">@PostMapping</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">TimeEntry</span> timeEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">TimeEntry</span> createdTimeEntry <span class="token operator">=</span> timeEntriesRepo<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>timeEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Returning a ResponseEntity allows us to control the resulting HTTP status code</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>createdTimeEntry<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>CREATED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Retrieve a single record</span>
	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"{id}"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">TimeEntry</span> timeEntry <span class="token operator">=</span> timeEntriesRepo<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>timeEntry <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>timeEntry<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NOT_FOUND<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Retrieve all records</span>
	<span class="token annotation punctuation">@GetMapping</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>timeEntriesRepo<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Update</span>
	<span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"{id}"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">TimeEntry</span> timeEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">TimeEntry</span> updatedTimeEntry <span class="token operator">=</span> timeEntriesRepo<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> timeEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>updatedTimeEntry <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>updatedTimeEntry<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NOT_FOUND<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Delete</span>
	<span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"{id}"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		timeEntriesRepo<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NO_CONTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Returning a <code class="language-text">ResponseEntity</code> allows us to control the resulting HTTP status code.</p>
<h2>4. Test and Deploy the Changes</h2>
<p>Use PostMan, curl, or unit tests to test the end-points. Here's a sample set of end-to-end tests for the TimeEntryController:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">test<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>trackerapi</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jayway<span class="token punctuation">.</span>jsonpath<span class="token punctuation">.</span></span><span class="token class-name">DocumentContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>tracker<span class="token punctuation">.</span></span><span class="token class-name">PalTrackerApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>pivotal<span class="token punctuation">.</span>pal<span class="token punctuation">.</span>tracker<span class="token punctuation">.</span></span><span class="token class-name">TimeEntry</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">TestRestTemplate</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpMethod</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">com<span class="token punctuation">.</span>jayway<span class="token punctuation">.</span>jsonpath<span class="token punctuation">.</span></span><span class="token class-name">JsonPath</span><span class="token punctuation">.</span>parse<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>assertj<span class="token punctuation">.</span>core<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Assertions</span><span class="token punctuation">.</span>assertThat<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">.</span><span class="token class-name">WebEnvironment</span><span class="token punctuation">.</span>RANDOM_PORT<span class="token punctuation">;</span>

<span class="token comment">// Wire up the Spring application</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">PalTrackerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> webEnvironment <span class="token operator">=</span> RANDOM_PORT<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeEntryApiTest</span> <span class="token punctuation">{</span>

	<span class="token comment">// Use to call the TimeEntryController end-points</span>
	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">TestRestTemplate</span> restTemplate<span class="token punctuation">;</span>

	<span class="token comment">// Sample/test data</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> projectId <span class="token operator">=</span> <span class="token number">123L</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> userId <span class="token operator">=</span> <span class="token number">456L</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">TimeEntry</span> timeEntry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2017-01-08"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> createResponse <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForEntity</span><span class="token punctuation">(</span><span class="token string">"/time-entries"</span><span class="token punctuation">,</span> timeEntry<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">assertThat</span><span class="token punctuation">(</span>createResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>CREATED<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// com.jayway.jsonpath.JsonPath.parse makes it easy to read JSON</span>
		<span class="token class-name">DocumentContext</span> createJson <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>createResponse<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>createJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.id"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isGreaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>createJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.projectId"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>projectId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>createJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.userId"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>createJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.date"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token string">"2017-01-08"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>createJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.hours"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token function">createTimeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> listResponse <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span><span class="token string">"/time-entries"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">assertThat</span><span class="token punctuation">(</span>listResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">DocumentContext</span> listJson <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>listResponse<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">Collection</span> timeEntries <span class="token operator">=</span> listJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$[*]"</span><span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>timeEntries<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">Long</span> readId <span class="token operator">=</span> listJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$[0].id"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>readId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token function">createTimeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> readResponse <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>restTemplate<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span><span class="token string">"/time-entries/"</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">assertThat</span><span class="token punctuation">(</span>readResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">DocumentContext</span> readJson <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>readResponse<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>readJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.id"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>readJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.projectId"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>projectId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>readJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.userId"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>readJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.date"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token string">"2017-01-08"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>readJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.hours"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token function">createTimeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> projectId <span class="token operator">=</span> <span class="token number">2L</span><span class="token punctuation">;</span>
		<span class="token keyword">long</span> userId <span class="token operator">=</span> <span class="token number">3L</span><span class="token punctuation">;</span>
		<span class="token class-name">TimeEntry</span> updatedTimeEntry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2017-01-09"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> updateResponse <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token string">"/time-entries/"</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span>PUT<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>updatedTimeEntry<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">assertThat</span><span class="token punctuation">(</span>updateResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">DocumentContext</span> updateJson <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>updateResponse<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>updateJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.id"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>updateJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.projectId"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>projectId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>updateJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.userId"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>updateJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.date"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token string">"2017-01-09"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>updateJson<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"$.hours"</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token function">createTimeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> deleteResponse <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token string">"/time-entries/"</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span>DELETE<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


		<span class="token function">assertThat</span><span class="token punctuation">(</span>deleteResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NO_CONTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> deletedReadResponse <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>restTemplate<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span><span class="token string">"/time-entries/"</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assertThat</span><span class="token punctuation">(</span>deletedReadResponse<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NOT_FOUND<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token class-name">Long</span> <span class="token function">createTimeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> entity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>timeEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TimeEntry</span><span class="token punctuation">></span></span> response <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token string">"/time-entries"</span><span class="token punctuation">,</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">,</span> entity<span class="token punctuation">,</span> <span class="token class-name">TimeEntry</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">assertThat</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEqualTo</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>CREATED<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now that basic CRUD operations are complete, they can be deployed to Cloud Foundry:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">./gradlew build <span class="token comment"># build the JAR</span>
cf push -p build/libs/pal-tracker.jar <span class="token comment"># deploy to CF</span></code></pre></div></div><article><h2>Topics related to <!-- -->Spring MVC CRUD Operations</h2><section><a href="/cloud-foundry/"><h3>Cloud Foundry</h3></a><p>Could Foundry: An open-source cloud platform as a service (PaaS)</p></section><section><a href="/gradle/"><h3>Gradle Build Tool</h3></a><p>Gradle Build Tool Gradle is build automation tool that automates common software build steps like compile, test, package, deploy, and…</p></section><section><a href="/java/"><h3>Java</h3></a><p>A cross-platform, object-oriented programming language</p></section><section><a href="/intellij/"><h3>IntelliJ IDE</h3></a><p>IntelliJ IDEA IntelliJ IDEA is a Java IDE, developed by JetBrains.</p></section><section><a href="/microservices/"><h3>Microservices</h3></a><p>A software architecture in which applications are made up of loosely coupled services</p></section><section><a href="/spring-boot/"><h3>Spring Boot</h3></a><p>Spring Boot Spring Boot is an open source Java framework used to develop REST services based on Spring Framework.</p></section><section><a href="/pal-tracker/"><h3>PAL Tracker</h3></a><p>An example application to demonstrate application deployment and management strategies in Java, Spring Boot, and Cloud Foundry</p></section></article></main><footer class="clearfix"><div class="row"><section class="column small-12 medium-6 large-3"><h2>About James</h2><p>James is a father at home, Principal Software Engineer at work, and<!-- --> <em>wannabe</em> autodidact everywhere else.</p><p><a href="/contact">Contact James</a></p></section><section class="column small-12 medium-6 large-3"><h2>Social</h2><a href="https://www.jamestharpe.com/"><img alt="James Tharpe&#x27;s Website" width="22px" src="https://raw.githubusercontent.com/iconic/open-iconic/master/svg/globe.svg"/></a> <a href="https://twitter.com/jamestharpe"><img alt="James Tharpe&#x27;s Twitter" width="22px" src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/twitter.svg"/></a> <a href="https://www.linkedin.com/in/jamestharpe/"><img alt="James Tharpe&#x27;s LinkedIn" width="22px" src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/linkedin.svg"/></a> <a href="https://stackoverflow.com/users/104763/james"><img alt="James Tharpe&#x27;s StackOverflow" width="22px" src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/stackoverflow.svg"/></a> <a href="https://gitlab.com/jamestharpe"><img alt="James Tharpe&#x27;s GitLab" width="22px" src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/gitlab.svg"/></a></section><section class="column small-12 medium-6 large-3"><p xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" class="license-text"><a aria-current="page" rel="cc:attributionURL" property="dct:title" class="" href="/cloud-foundry-spring-mvc-crud-operations/">This article</a> <!-- -->by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://www.jamestharpe.com">James Tharpe</a> <!-- -->is licensed under<!-- --> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0<br/><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt="Creative Commons"/><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt="Attribution"/><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt="Non-Commercial"/><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt="Share Alike"/></a></p></section></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/cloud-foundry-spring-mvc-crud-operations/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-bcb87bca9452a18f75ed.js"],"app":["/app-5b086e134c9e98d58ab7.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-1d1025aec75f2dec1349.js"],"component---src-pages-browse-tsx":["/component---src-pages-browse-tsx-75f54e7b70c7b9f03011.js"],"component---src-pages-hire-me-tsx":["/component---src-pages-hire-me-tsx-de4af696a805998ad364.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-70e07b909124637e29ae.js"],"component---src-templates-article-tsx":["/component---src-templates-article-tsx-c9595e21c952b003478d.js"]};/*]]>*/</script><script src="/polyfill-bcb87bca9452a18f75ed.js" nomodule=""></script><script src="/webpack-runtime-2f099a332ccca9ed90fd.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/app-5b086e134c9e98d58ab7.js" async=""></script><script src="/commons-2bfb5058ac0ba02cc596.js" async=""></script><script src="/component---src-templates-article-tsx-c9595e21c952b003478d.js" async=""></script><script src="/framework-e2d419ac45d8ae41957a.js" async=""></script></body></html>