{
    "componentChunkName": "component---src-templates-article-tsx",
    "path": "/amazon-redshift/",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"2021-12-04T20:19:30.000Z\",\n  \"description\": \"A columnar data warehouse solution on AWS\",\n  \"redirect_from\": [\"/tools/cloudformation/\"],\n  \"tags\": [\"aws\", \"data-warehouses\", \"columnar-databases\"],\n  \"title\": \"Amazon Redshift\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Amazon Redshift\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Amazon Redshift\"), \" is a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../columnar-databases/\"\n  }, \"columnar\"), \" \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../data-warehouses/\"\n  }, \"data warehouse\"), \" solution on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../aws/\"\n  }, \"AWS\"), \" that supports PostgreSQL queries. As a managed service, it simplifies automation of tasks such as backups, replication, and auto-scaling. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Amazon Redshift Spectrum\"), \" extends Redshift to allow querying of S3 buckets so that data does not need to be loaded directly into a Redshift database.\"), mdx(\"p\", null, \"A key difference between Redshift and relational \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../databases/\"\n  }, \"databases\"), \" is that it uses a columnar architecture, which means that data is stored by column rather than by row.\"), mdx(\"h2\", null, \"Redshift architecture\"), mdx(\"p\", null, \"A Redshift cluster consists of a leader node and one or more compute nodes. Queries to Redshift are sent to the leader node's SQL endpoint, which breaks the work down into jobs that are forwarded to the compute nodes where they are processed in parallel.\"), mdx(\"div\", {\n    \"className\": \"mermaid\"\n  }, \"flowchart TD\\n    Client -->|SQL Query| Leader[Leader Node]\\n\\n\\tsubgraph Redshift Cluster\\n\\t\\tLeader --> C1[Compute Node 1]\\n\\t\\tLeader --> CDot[...]\\n\\t\\tLeader --> CN[Compute Node N]\\n\\t\\tC1 --> Leader\\n\\t\\tCDot --> Leader\\n\\t\\tCN --> Leader\\n\\tend\\n\\n\\tLeader -->|Data| Client\"), mdx(\"h2\", null, \"Redshift table design\"), mdx(\"p\", null, \"A well designed Redshift table will ensure even distribution of data across nodes so that jobs executed by each node will complete at roughly the same time. Data should also be sorted to minimize the need for table scans. Data may also be compressed to reduce disk space requirements and minimize I/O.\"), mdx(\"h3\", null, \"Table distribution styles\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Style\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Description\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Benefits\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Drawbacks\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"ALL\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Each node contains the full table\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Maximizes performance\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Requires excessive storage\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"AUTO\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Use \", mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" initially, switch to \", mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"EVEN\"), \" when the table gets too large\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Balances trade-offs between \", mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" and \", mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"EVEN\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Can be the \\\"worst of both worlds\\\"\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"EVEN\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Data is round-robin partitioned\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Ensures even distribution of data across nodes\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Poor join performance\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"KEY\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Data is distributed based on a table colum\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Balances performance with storage\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Requires evenly distributed data\")))), mdx(\"h4\", null, \"The \", mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" distribution style\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" distribution style stores the full table on each node. While this can improve performance dramatically, it can also increase storage needs dramatically.\"), mdx(\"p\", null, \"Use the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" distribution style for:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Smaller, frequently used dimension tables\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tables where performance is critical\")), mdx(\"h4\", null, \"The \", mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"AUTO\"), \" distribution style\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"AUTO\"), \" distribution style is the default style used by Redshift and uses \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" initially, then switches to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"EVEN\"), \" when the table gets too large. Once the table is switched to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"EVEN\"), \", it will not revert to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ALL\"), \" even if the table size decreases.\"), mdx(\"h4\", null, \"The \", mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"EVEN\"), \" distribution style\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"EVEN\"), \" distribution style distributes data evenly across all nodes in round-robin fashion, ensuring an even but essentially random distribution.\"), mdx(\"p\", null, \"Use the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"EVEN\"), \" distribution style for:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tables that aren't usually joined with other tables\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When you can't decide between other distribution styles\")), mdx(\"h4\", null, \"The \", mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"KEY\"), \" distribution style\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"KEY\"), \" distribution style distributes data across nodes based on values from one column, referred to as the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"distribution key column\"), \". All records with the same value for the distribution column will be stored on the same node (the column names do not need to match, only the values). The same distribution pattern applies for other tables with the same distribution key column value which can improve performance through a reduced need for communication across nodes.\"), mdx(\"p\", null, \"Use the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"KEY\"), \" distribution styles for:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Keys that are evenly distributed\")), mdx(\"h3\", null, \"Sort strategies\"), mdx(\"p\", null, \"In Redshift, a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sort key\"), \" specifies the order in which data is stored on disk. Each table can specify one of three sort options:\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Strategy\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Description\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"sortkey\"), \" (simple)\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Data is sorted by a single column\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"compound sortkey\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Data is hierarchically sorted by multiple columns\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"code\", {\n    parentName: \"td\",\n    \"className\": \"language-text\"\n  }, \"interleaved sortkey\")), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Data is independently sorted by multiple columns (this requires additional disk space)\")))), mdx(\"p\", null, \"Interleaved sorted tables tend to perform worse for queries that filter by the simple or compound sort-keys, as long as the filters make use of the hierarchy defined by compound keys, due to it's more complex storage structure. However, virtually all other filters will perform better with an interleaved sort-key with the trade-off that additional storage space is required.\"), mdx(\"h2\", null, \"Amazon Redshift Resources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://aws.amazon.com/redshift/\"\n  }, \"Amazon Redshift Homepage\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.aws.amazon.com/redshift/index.html\"\n  }, \"Amazon Redshift Documentation\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.aws.amazon.com/redshift/latest/dg/c_high_level_system_architecture.html\"\n  }, \"Redshift high-level System Architecture\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://aws.amazon.com/redshift/pricing/\"\n  }, \"Redshift Pricing Guide\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://aws.amazon.com/blogs/big-data/10-best-practices-for-amazon-redshift-spectrum/\"\n  }, \"Redshift Best Practices\"))));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/amazon-redshift/"},"frontmatter":{"title":"Amazon Redshift","tags":["aws","data-warehouses","columnar-databases"]}}},"pageContext":{"slug":"/amazon-redshift/"}},
    "staticQueryHashes": ["1957148337","3794076007","80858887"]}