{"expireTime":9007200860997566000,"key":"transformer-remark-markdown-ast-aede289aee0049b500cce41bbc87cbb2-gatsby-remark-graphgatsby-remark-prismjsgatsby-remark-katex-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Recipe: Configure Spring Boot on Cloud Foundry","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":49,"offset":49},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":49,"offset":49},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This recipe is illustrated in the ","position":{"start":{"line":4,"column":1,"offset":51},"end":{"line":4,"column":35,"offset":85},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/jamestharpe/pal-tracker","children":[{"type":"text","value":"PAL Tracker","position":{"start":{"line":4,"column":36,"offset":86},"end":{"line":4,"column":47,"offset":97},"indent":[]}}],"position":{"start":{"line":4,"column":35,"offset":85},"end":{"line":4,"column":92,"offset":142},"indent":[]}},{"type":"text","value":" example project.","position":{"start":{"line":4,"column":92,"offset":142},"end":{"line":4,"column":109,"offset":159},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":51},"end":{"line":4,"column":109,"offset":159},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"1. Inject Environment Variables into a Controller","position":{"start":{"line":6,"column":4,"offset":164},"end":{"line":6,"column":53,"offset":213},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":161},"end":{"line":6,"column":53,"offset":213},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Update the ","position":{"start":{"line":8,"column":1,"offset":215},"end":{"line":8,"column":12,"offset":226},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">WelcomeController</code>","position":{"start":{"line":8,"column":12,"offset":226},"end":{"line":8,"column":31,"offset":245},"indent":[]}},{"type":"text","value":" so that the ","position":{"start":{"line":8,"column":31,"offset":245},"end":{"line":8,"column":44,"offset":258},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">sayHello()</code>","position":{"start":{"line":8,"column":44,"offset":258},"end":{"line":8,"column":56,"offset":270},"indent":[]}},{"type":"text","value":" method returns a ","position":{"start":{"line":8,"column":56,"offset":270},"end":{"line":8,"column":74,"offset":288},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">message</code>","position":{"start":{"line":8,"column":74,"offset":288},"end":{"line":8,"column":83,"offset":297},"indent":[]}},{"type":"text","value":" field set by the constructor. Use the ","position":{"start":{"line":8,"column":83,"offset":297},"end":{"line":8,"column":122,"offset":336},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">@Value</code>","position":{"start":{"line":8,"column":122,"offset":336},"end":{"line":8,"column":130,"offset":344},"indent":[]}},{"type":"text","value":" annotation to inject the value from the environment:","position":{"start":{"line":8,"column":130,"offset":344},"end":{"line":8,"column":183,"offset":397},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":215},"end":{"line":8,"column":183,"offset":397},"indent":[]}},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">io<span class=\"token punctuation\">.</span>pivotal<span class=\"token punctuation\">.</span>pal<span class=\"token punctuation\">.</span>tracker</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WelcomeController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">WelcomeController</span><span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// Injects the WELCOME_MESSAGE environment variable</span>\n        <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${welcome.message}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> message\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> message<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":10,"column":1,"offset":399},"end":{"line":34,"column":4,"offset":977},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Running the app now will result in a failure: ","position":{"start":{"line":36,"column":1,"offset":979},"end":{"line":36,"column":47,"offset":1025},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Could not resolve placeholder &#39;welcome.message&#39; in value &quot;${welcome.message}&quot;</code>","position":{"start":{"line":36,"column":47,"offset":1025},"end":{"line":36,"column":126,"offset":1104},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":36,"column":126,"offset":1104},"end":{"line":36,"column":127,"offset":1105},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":979},"end":{"line":36,"column":127,"offset":1105},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To resolve this, update the ","position":{"start":{"line":38,"column":1,"offset":1107},"end":{"line":38,"column":29,"offset":1135},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"build.gradle","position":{"start":{"line":38,"column":31,"offset":1137},"end":{"line":38,"column":43,"offset":1149},"indent":[]}}],"position":{"start":{"line":38,"column":29,"offset":1135},"end":{"line":38,"column":45,"offset":1151},"indent":[]}},{"type":"text","value":" to set the ","position":{"start":{"line":38,"column":45,"offset":1151},"end":{"line":38,"column":57,"offset":1163},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">WELCOME_MESSAGE</code>","position":{"start":{"line":38,"column":57,"offset":1163},"end":{"line":38,"column":74,"offset":1180},"indent":[]}},{"type":"text","value":" environment variable in the ","position":{"start":{"line":38,"column":74,"offset":1180},"end":{"line":38,"column":103,"offset":1209},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">bootRun</code>","position":{"start":{"line":38,"column":103,"offset":1209},"end":{"line":38,"column":112,"offset":1218},"indent":[]}},{"type":"text","value":" configuration:","position":{"start":{"line":38,"column":112,"offset":1218},"end":{"line":38,"column":127,"offset":1233},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1107},"end":{"line":38,"column":127,"offset":1233},"indent":[]}},{"type":"html","lang":"groovy","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">bootRun<span class=\"token punctuation\">.</span><span class=\"token function\">environment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n     <span class=\"token string gstring\">\"WELCOME_MESSAGE\"</span><span class=\"token punctuation\">:</span> <span class=\"token string gstring\">\"hello\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":40,"column":1,"offset":1235},"end":{"line":44,"column":4,"offset":1306},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"2. Built-in Cloud Foundry Environment Variables","position":{"start":{"line":46,"column":4,"offset":1311},"end":{"line":46,"column":51,"offset":1358},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1308},"end":{"line":46,"column":51,"offset":1358},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloud Foundry comes with several ","position":{"start":{"line":48,"column":1,"offset":1360},"end":{"line":48,"column":34,"offset":1393},"indent":[]}},{"type":"link","title":null,"url":"https://docs.run.pivotal.io/devguide/deploy-apps/environment-variable.html","children":[{"type":"text","value":"built-in environment variables","position":{"start":{"line":48,"column":35,"offset":1394},"end":{"line":48,"column":65,"offset":1424},"indent":[]}}],"position":{"start":{"line":48,"column":34,"offset":1393},"end":{"line":48,"column":142,"offset":1501},"indent":[]}},{"type":"text","value":" accessible to your application. To show this, let's create a new controller called ","position":{"start":{"line":48,"column":142,"offset":1501},"end":{"line":48,"column":226,"offset":1585},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">EnvController</code>","position":{"start":{"line":48,"column":226,"offset":1585},"end":{"line":48,"column":241,"offset":1600},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":48,"column":241,"offset":1600},"end":{"line":48,"column":242,"offset":1601},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1360},"end":{"line":48,"column":242,"offset":1601},"indent":[]}},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">io<span class=\"token punctuation\">.</span>pivotal<span class=\"token punctuation\">.</span>pal<span class=\"token punctuation\">.</span>tracker</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EnvController</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> port<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> memoryLimit<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> cfInstanceIndex<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> cfInstanceAddress<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">EnvController</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token comment\">// Injects the PORT environment variable, defaults to NOT SET</span>\n\t\t<span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${port:NOT SET}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> port<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token comment\">// Injects the MEMORY_LIMIT environment variable, defaults to NOT SET</span>\n\t\t<span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${memory.limit:NOT SET}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> memoryLimit<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token comment\">// Injects the CF_INSTANCE_INDEX environment variable, defaults to NOT SET</span>\n\t\t<span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${cf.instance.index:NOT SET}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> cfInstanceIndex<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token comment\">// Injects the CF_INSTANCE_ADDR environment variable, defaults to NOT SET</span>\n\t\t<span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${cf.instance.addr:NOT SET}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> cfInstanceAddress\n\t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>port <span class=\"token operator\">=</span> port<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memoryLimit <span class=\"token operator\">=</span> memoryLimit<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cfInstanceIndex <span class=\"token operator\">=</span> cfInstanceIndex<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cfInstanceAddress <span class=\"token operator\">=</span> cfInstanceAddress<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// Maps GET requests to /env</span>\n\t<span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/env\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tresult<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PORT\"</span><span class=\"token punctuation\">,</span> port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tresult<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MEMORY_LIMIT\"</span><span class=\"token punctuation\">,</span> memoryLimit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tresult<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CF_INSTANCE_INDEX\"</span><span class=\"token punctuation\">,</span> cfInstanceIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tresult<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CF_INSTANCE_ADDR\"</span><span class=\"token punctuation\">,</span> cfInstanceAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":50,"column":1,"offset":1603},"end":{"line":95,"column":4,"offset":3094},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Run the app and visit the ","position":{"start":{"line":97,"column":1,"offset":3096},"end":{"line":97,"column":27,"offset":3122},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">/env</code>","position":{"start":{"line":97,"column":27,"offset":3122},"end":{"line":97,"column":33,"offset":3128},"indent":[]}},{"type":"text","value":" end-point to see the output in your local environment:","position":{"start":{"line":97,"column":33,"offset":3128},"end":{"line":97,"column":88,"offset":3183},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":3096},"end":{"line":97,"column":88,"offset":3183},"indent":[]}},{"type":"html","lang":"json","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property\">\"PORT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOT SET\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"CF_INSTANCE_ADDR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOT SET\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"CF_INSTANCE_INDEX\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOT SET\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"MEMORY_LIMIT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NOT SET\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":99,"column":1,"offset":3185},"end":{"line":106,"column":4,"offset":3312},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Set Environment Variables in Cloud Foundry","position":{"start":{"line":108,"column":5,"offset":3318},"end":{"line":108,"column":47,"offset":3360},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":3314},"end":{"line":108,"column":47,"offset":3360},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Deploy the app to see what happens in production:","position":{"start":{"line":110,"column":1,"offset":3362},"end":{"line":110,"column":50,"offset":3411},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3362},"end":{"line":110,"column":50,"offset":3411},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf push -p build/libs/pal-tracker.jar</code></pre></div>","position":{"start":{"line":112,"column":1,"offset":3413},"end":{"line":114,"column":4,"offset":3462},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The app will crash because the ","position":{"start":{"line":116,"column":1,"offset":3464},"end":{"line":116,"column":32,"offset":3495},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">WELCOME_MESSAGE</code>","position":{"start":{"line":116,"column":32,"offset":3495},"end":{"line":116,"column":49,"offset":3512},"indent":[]}},{"type":"text","value":" environment variable isn't set. The environment variable can be set using ","position":{"start":{"line":116,"column":49,"offset":3512},"end":{"line":116,"column":124,"offset":3587},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">cf set-env</code>","position":{"start":{"line":116,"column":124,"offset":3587},"end":{"line":116,"column":136,"offset":3599},"indent":[]}},{"type":"text","value":" then restaging:","position":{"start":{"line":116,"column":136,"offset":3599},"end":{"line":116,"column":152,"offset":3615},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":3464},"end":{"line":116,"column":152,"offset":3615},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf set-env pal-tracker WELCOME_MESSAGE hi\ncf restage pal-tracker <span class=\"token comment\"># no need to re-push</span></code></pre></div>","position":{"start":{"line":118,"column":1,"offset":3617},"end":{"line":121,"column":4,"offset":3714},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now when you check the Cloud Foundry endpoint, it will have the actual values:","position":{"start":{"line":123,"column":1,"offset":3716},"end":{"line":123,"column":79,"offset":3794},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":3716},"end":{"line":123,"column":79,"offset":3794},"indent":[]}},{"type":"html","lang":"json","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"PORT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"80\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"CF_INSTANCE_ADDR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.2.3.4:80\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"CF_INSTANCE_INDEX\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"MEMORY_LIMIT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1GB\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":125,"column":1,"offset":3796},"end":{"line":132,"column":4,"offset":3923},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"3. Scale your Cloud Foundry App","position":{"start":{"line":134,"column":4,"offset":3928},"end":{"line":134,"column":35,"offset":3959},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":3925},"end":{"line":134,"column":35,"offset":3959},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Scaling can be done horizontally, vertically, or both using the ","position":{"start":{"line":136,"column":1,"offset":3961},"end":{"line":136,"column":65,"offset":4025},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">cf scale</code>","position":{"start":{"line":136,"column":65,"offset":4025},"end":{"line":136,"column":75,"offset":4035},"indent":[]}},{"type":"text","value":" command:","position":{"start":{"line":136,"column":75,"offset":4035},"end":{"line":136,"column":84,"offset":4044},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":3961},"end":{"line":136,"column":84,"offset":4044},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Scale to 3 instances, 2GB storage, 1024M memory and force a restart</span>\ncf scale APP -i <span class=\"token number\">3</span> -k 2G -m 1024M -f</code></pre></div>","position":{"start":{"line":138,"column":1,"offset":4046},"end":{"line":141,"column":4,"offset":4163},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Check on the process by running ","position":{"start":{"line":143,"column":1,"offset":4165},"end":{"line":143,"column":33,"offset":4197},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">cf app pal-tracker</code>","position":{"start":{"line":143,"column":33,"offset":4197},"end":{"line":143,"column":53,"offset":4217},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":143,"column":53,"offset":4217},"end":{"line":143,"column":54,"offset":4218},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":4165},"end":{"line":143,"column":54,"offset":4218},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"4. Use a Manifest File","position":{"start":{"line":145,"column":4,"offset":4223},"end":{"line":145,"column":26,"offset":4245},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":4220},"end":{"line":145,"column":26,"offset":4245},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":147,"column":1,"offset":4247},"end":{"line":147,"column":5,"offset":4251},"indent":[]}},{"type":"link","title":null,"url":"https://docs.cloudfoundry.org/devguide/deploy-apps/manifest.html","children":[{"type":"text","value":"manifest.yml","position":{"start":{"line":147,"column":6,"offset":4252},"end":{"line":147,"column":18,"offset":4264},"indent":[]}}],"position":{"start":{"line":147,"column":5,"offset":4251},"end":{"line":147,"column":85,"offset":4331},"indent":[]}},{"type":"text","value":" specified an application's environment defaults, so they only need to be managed with the CLI if they need to be overridden. Rather than setting the ","position":{"start":{"line":147,"column":85,"offset":4331},"end":{"line":147,"column":235,"offset":4481},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">WELCOME_MESSAGE</code>","position":{"start":{"line":147,"column":235,"offset":4481},"end":{"line":147,"column":252,"offset":4498},"indent":[]}},{"type":"text","value":" value using ","position":{"start":{"line":147,"column":252,"offset":4498},"end":{"line":147,"column":265,"offset":4511},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">cf set-env</code>","position":{"start":{"line":147,"column":265,"offset":4511},"end":{"line":147,"column":277,"offset":4523},"indent":[]}},{"type":"text","value":", the value can be specified in the ","position":{"start":{"line":147,"column":277,"offset":4523},"end":{"line":147,"column":313,"offset":4559},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"manifest.yml","position":{"start":{"line":147,"column":315,"offset":4561},"end":{"line":147,"column":327,"offset":4573},"indent":[]}}],"position":{"start":{"line":147,"column":313,"offset":4559},"end":{"line":147,"column":329,"offset":4575},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":147,"column":329,"offset":4575},"end":{"line":147,"column":330,"offset":4576},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":4247},"end":{"line":147,"column":330,"offset":4576},"indent":[]}},{"type":"html","lang":"yaml","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">applications</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pal<span class=\"token punctuation\">-</span>tracker\n  <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> build/libs/pal<span class=\"token punctuation\">-</span>tracker.jar\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">WELCOME_MESSAGE</span><span class=\"token punctuation\">:</span> Hello from the Manifest</code></pre></div>","position":{"start":{"line":149,"column":1,"offset":4578},"end":{"line":156,"column":4,"offset":4714},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Run ","position":{"start":{"line":158,"column":1,"offset":4716},"end":{"line":158,"column":5,"offset":4720},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">cf push</code>","position":{"start":{"line":158,"column":5,"offset":4720},"end":{"line":158,"column":14,"offset":4729},"indent":[]}},{"type":"text","value":" again to see the updated ","position":{"start":{"line":158,"column":14,"offset":4729},"end":{"line":158,"column":40,"offset":4755},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">WELCOME_MESSAGE</code>","position":{"start":{"line":158,"column":40,"offset":4755},"end":{"line":158,"column":57,"offset":4772},"indent":[]}},{"type":"text","value":" value in the CF environment.","position":{"start":{"line":158,"column":57,"offset":4772},"end":{"line":158,"column":86,"offset":4801},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":4716},"end":{"line":158,"column":86,"offset":4801},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":159,"column":1,"offset":4802}}}}